<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>BELAJAR FIREBASE</title>
</head>

<body>
    <ul></ul>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
     <script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-database.js"></script>

    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyB7eW8x23jrUD1df88EADTUuh2dMtLZqV0",
            authDomain: "fir-dasar-ad5b6.firebaseapp.com",
            databaseURL: "https://fir-dasar-ad5b6.firebaseio.com",
            projectId: "fir-dasar-ad5b6",
            storageBucket: "fir-dasar-ad5b6.appspot.com",
            messagingSenderId: "273588853948",
            appId: "1:273588853948:web:afaadfb37c3768f1f084b9"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        const db = firebase.database().ref('mahasiswa');
        db.orderByChild('nama').equalTo('andi').on('value',showData,errData);
        //db.on('child_added',showMessage)
        //value = child_added => muncul ketika penambahan data baru
        // child_changed => muncul ketika kita mangubah data 

        // filter order 
        // order => orderBy(default),orderByChild(),orderByVal() 

        // filter 
        // startAt(),endAt(),equalsTo()=>sama seperti sesuai dengan order,limitToFirst(),limitToEnd()


        function showData(items){
            var el = document.getElementsByTagName('ul')[0];
            var _konten = ""
            items.forEach(item => {
                _konten += "<li>"+item.val().nama+"||"+item.val().jurusan+"</li>"
            });
            el.innerHTML=_konten
        }

        function showMessage(items){
           console.log( `item ${items.val().nama} telah ditambah ` )
        }

        function errData(err){
            console.log(err)
        }

    </script>
</body>

</html>